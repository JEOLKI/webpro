<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link rel="stylesheet" href="../css/public.css">

<script type="text/javascript">
	
	function proc1() {
		
		// 주민번호 입력받기 - 110326-1234567
		str = prompt("주민등록번호를 입력해주세요");
		
		yearnum = str.substring(0,2);
		month = str.substring(2,4);
		date = str.substring(4,6);
		gender = str.substr(7,1);
		
		if (gender==1 || gender==2) {
			year = "19" + yearnum;
		} else {
			year = "20" + yearnum;
		}
		
		res = "생일 : "+ year +"년 " + month + "월 " + date + "일 <br>";
		
		if (gender==1 || gender==3) {
			gender = "남자";
		} else {
			gender = "여자";
		}
		
		today = new Date();
		
		age = today.getFullYear() - year + 1;
		
		res += "성별 : " + gender + "<br> 나이 : " + age;
		
		document.querySelector("#result1").innerHTML = res;
		
	}
	
	function proc2() {
		
		str = prompt("주민등록번호를 입력해주세요", "123456-1234567");
		num = "234567892345";
		
		strarr = str.split("-"); // 배열로 리턴
		
		str = strarr[0].concat(strarr[1]); //배열: 1234561234567
		console.log("str = " + str);
		console.log("str.length = " + str.length)
		
		sum=0;
		
		for (var i = 0; i < str.length-1; i++) {
			sum += str[i] * num.substr(i,1)
		}
		
		value = 11 - (sum % 11)
		
		if (value == 10) value = 0;
		else if (value == 11) value = 1;
		
		
		res=  "입력 : " + strarr[0] + "<br>";
		if (value == str[str.length-1]){
			res += "올바른번호";			
		} else {
			res += "누구냐?";
		}
		
		document.querySelector("#result2").innerHTML = res;
		
		
	
// 		sum = 0;
		
// 		for (var i = 0; i < 6; i++) {
// 			sum += str.substring(i,i+1)*(i+2);
// 		}
		
// 		for (var i = 7; i < 9 ; i++) {
// 			sum += str.substring(i,i+1)*(i+1);
// 		}
		
// 		for (var i = 9; i < 13; i++) {
// 			sum += str.substring(i,i+1)*(i-7);
// 		}
		
// 		x = sum%11;
// 		y = 11 - x;
		
// 		if (y == 10) {
// 			y = 0;
// 		} else if (y == 11) {
// 			y = 1;
// 		}
		
// 		res = "";
		
// 		if(y == str.substr(13,1) ){
// 			res += " 맞는 주민번호입니다.";
// 		} else {
// 			res += " 틀린 주민번호입니다."
// 		}
		
	}

</script>

</head>
<body>

	<div class="box">
		<h3>1. 주민등록번호를 입력 받아 생년월일과 성별을 출력하는 프로그램을 작성하시오</h3>
		예) 주민등록번호를 110326-4432618로 입력 받은 경우<br>
		생일 : 2011년 3월 26일<br>
		성별 : 여자  나이: newDate생성해서 년도값을 가져와서 뺄셈하기
		<br><br>
		<input type="button" value="확  인" onclick="proc1()">
		<br><br>
		<div id="result1"></div>
	</div>
	
	<div class="box">
		<h3>2. 주민등록번호를 입력 받아 주민등록번호의 유효성을 검사하는 프로그램을 작성하시오 </h3>
		주민번호 : ABCDEF-GHIJKLM <br>
		1. A*2 + B*3 + ... + H*9 + I*2 + ... + L*5 의 총합을 구한다.<br>
		2. 1번의 합을 11로 나눈 나머지를 구한다.<br>
		3. 11에서 2번의 결과를 뺀다.<br>
		4. 3번의 결과가 0~9이면 값 그대로, 10이면 0, 11이면 1로 변환<br>
		5. 4번의 결과와 M자리의 값이 같으면 맞는 번호이다.
		
		<br><br>
		<input type="button" value="확  인" onclick="proc2()">
		<br><br>
		<div id="result2"></div>
	</div>
	
</body>
</html>